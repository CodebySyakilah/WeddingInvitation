<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Wedding Invitation</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
	
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

</head>
<body>

<div class="falling-petals"></div>

<div class="light-effect" id="lightEffectContainer"></div>





  <!-- BACKGROUND MUSIC -->
  <audio id="bgm" src="music.mp3" loop></audio>

  <!-- COVER PAGE -->
<section id="cover" class="glow">
  <div class="cover-wrapper">
    <img src="cover.png" alt="Cover Image" class="cover-image glow" />
    <button id="openBtn">BUKA</button>
  </div>
</section>

  

  <!-- MAIN CONTENT -->
  <div id="main" class="hidden">

    <!-- VIDEO SECTION -->
    <section id="video" class="fade">
      <video src="video.mp4" controls autoplay muted loop></video>
    </section>

<!-- INFO 1 -->
<section id="info1" class="fade section-image">
  <img src="info1.png" alt="Info 1" >
</section>


<!-- INFO 2 -->
<section id="info2"  class="fade section-image">
  <img src="info2.png" alt="Info 2">
</section>

    <!-- COUNTDOWN -->
<!-- COUNTDOWN -->
<section id="countdown" class="fade themed-section">
  <h2>Detik Menuju Hari Bahagia Kami</h2>
  <div class="countdown-single-box glow">
    <span id="days">00</span> Hari &nbsp;&nbsp;
    <span id="hours">00</span> Jam &nbsp;&nbsp;
    <span id="minutes">00</span> Minit &nbsp;&nbsp;
  </div>
</section>




<!-- INFO 3 -->
<section id="info3"  class="fade section-image">
  <img src="info3.png" alt="Info 3">
</section>

    <!-- WISH SECTION -->
<section id="wish" class="fade themed-section">
  <h2>Ucapan & Doa</h2>
  <form id="wishForm">
    <input type="text" id="nameInput" placeholder="Nama Anda" required><br>
    <textarea id="wishInput" placeholder="Ucapan anda..." rows="4" required></textarea><br>
    <button type="submit">Hantar</button>
  </form>
  <div id="wishScrollContainer" class="glow" >
  <div id="wishContainer"></div>
</div>

</section>

  <!-- THANK YOU -->
<section id="thankyou"  class="fade section-image">
  <img src="thankyou.png" alt="Thank You">
</section>

  <!-- CREDIT SECTION -->
  <section id="credit">
    <p>Direka oleh <strong>Syakilah Shafi’e</strong> © 2025</p>
  </section>


  </div>

  <!-- POPUP SECTION -->
  <div id="popup" class="hidden"></div>

<!-- NAVIGATION -->
<nav id="navbar" class="hidden">
  <div class="nav-container">
    <div class="nav-button" onclick="showLocationPopup()">
      <img src="icon-location.png" alt="Location" class="nav-icon" />
      <span class="nav-label">Lokasi</span>
    </div>
    <div class="nav-button" onclick="scrollToSection('wish')">
      <img src="icon-wish.png" alt="Wish" class="nav-icon" />
      <span class="nav-label">Ucapan</span>
    </div>
    <div class="nav-button" onclick="showCalendarPopup()">
      <img src="icon-calendar.png" alt="Calendar" class="nav-icon" />
      <span class="nav-label">Kalender</span>
    </div>
    <div class="nav-button" onclick="showContactPopup()">
      <img src="icon-contact.png" alt="Contact" class="nav-icon" />
      <span class="nav-label">Hubungi</span>
    </div>
  </div>
</nav>








  <!-- SCRIPT -->
  <script>
    // Open Invitation
document.getElementById('openBtn').addEventListener('click', () => {
  document.getElementById('cover').style.display = 'none';
  const main = document.getElementById('main');
  main.classList.remove('hidden');
  document.getElementById('navbar').classList.remove('hidden'); // Show nav bar
  window.scrollTo(0, 0);
  document.getElementById('bgm').play();
});

    // Fade-in on scroll
    const faders = document.querySelectorAll(".fade");
    const appearOptions = {
      threshold: 0.3,
      rootMargin: "0px 0px -50px 0px"
    };

    const appearOnScroll = new IntersectionObserver(function(entries, observer) {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add("appear");
        observer.unobserve(entry.target);
      });
    }, appearOptions);

    faders.forEach(fader => appearOnScroll.observe(fader));

    // Countdown
  const countdownDate = new Date("2025-10-18T00:00:00").getTime();

  const countdownFunction = setInterval(() => {
    const now = new Date().getTime();
    const distance = countdownDate - now;

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

    document.getElementById("days").innerText = days;
    document.getElementById("hours").innerText = hours;
    document.getElementById("minutes").innerText = minutes;

    if (distance < 0) {
      clearInterval(countdownFunction);
      document.getElementById("days").innerText = "00";
      document.getElementById("hours").innerText = "00";
      document.getElementById("minutes").innerText = "00";
    }
  }, 1000);
	
	
  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyC9uSwgPscJp_RxWTey9xXxcn-cJtT61_M",
    authDomain: "weddingwish-1d9a0.firebaseapp.com",
    databaseURL: "https://weddingwish-1d9a0-default-rtdb.firebaseio.com",
    projectId: "weddingwish-1d9a0",
    storageBucket: "weddingwish-1d9a0.firebasestorage.app",
    messagingSenderId: "1083808773473",
    appId: "1:1083808773473:web:66975950cd89688a110120",
    measurementId: "G-SFYM8LR9VQ"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();


// Wish Form
  const wishForm = document.getElementById('wishForm');
  const wishContainer = document.getElementById('wishContainer');

  // Save new wish
  wishForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('nameInput').value;
    const wish = document.getElementById('wishInput').value;

    const newWishRef = db.ref('wishes').push();
    newWishRef.set({
      name: name,
      wish: wish,
      timestamp: Date.now()
    });

    wishForm.reset();
  });

  // Realtime listener to show wishes
  db.ref('wishes').orderByChild('timestamp').on('value', snapshot => {
    wishContainer.innerHTML = ''; // Clear previous wishes
    const data = snapshot.val();
    if (data) {
      const sorted = Object.values(data).sort((a, b) => b.timestamp - a.timestamp);
      sorted.forEach(item => {
        const wishDiv = document.createElement('div');
        wishDiv.classList.add('wish-message');
        wishDiv.innerHTML = `
          <div class="wish-name">${item.name}</div>
          <div class="wish-text">${item.wish}</div>
        `;
        wishContainer.appendChild(wishDiv);
      });
    }
  });

    // Popup Functions
    const popup = document.getElementById('popup');

    function closePopupAfter(seconds = 8) {
      setTimeout(() => {
        popup.classList.add('hidden');
        popup.innerHTML = '';
      }, seconds * 1000);
    }

function showLocationPopup() {
  popup.innerHTML = `
    <button onclick="window.open('https://share.google/oESSyG5y8VgMGRrcc', '_blank')">
      Google Maps
    </button>
    <button onclick="window.open('https://waze.com/ul/hw28660098', '_blank')">
      Waze
    </button>
  `;
  popup.classList.remove('hidden');
  closePopupAfter();
}


    function showCalendarPopup() {
      popup.innerHTML = `
        <a href="invite.ics" download><button>18 October 2025</button></a>
      `;
      popup.classList.remove('hidden');
      closePopupAfter();
    }

    function showContactPopup() {
      popup.innerHTML = `
        <button onclick="window.open('https://wa.me/60197420478', '_blank')">Aziah</button>
        <button onclick="window.open('https://wa.me/601124033872', '_blank')">Muadz</button>
        <button onclick="window.open('https://wa.me/60194106579', '_blank')">Syakilah</button>
      `;
      popup.classList.remove('hidden');
      closePopupAfter();
    }

    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: 'smooth' });
    }
	
	function createPetal() {
  const petal = document.createElement('div');
  petal.classList.add('petal');

  // Posisi rawak di atas skrin
  petal.style.left = Math.random() * window.innerWidth + 'px';

  // Saiz rawak
  const size = 20 + Math.random() * 20;
  petal.style.width = size + 'px';
  petal.style.height = size + 'px';

  // Durasi animasi rawak
  petal.style.animationDuration = (5 + Math.random() * 5) + 's';

  document.querySelector('.falling-petals').appendChild(petal);

  // Buang kelopak selepas animasi tamat
  setTimeout(() => {
    petal.remove();
  }, 10000);
}

// Jatuhkan kelopak secara berkala
setInterval(createPetal, 500); // setiap 0.5s

	
	const container = document.getElementById('lightEffectContainer');
  for (let i = 0; i < 20; i++) {
  const dot = document.createElement('span');
  dot.style.top = Math.random() * 100 + '%';
  dot.style.left = Math.random() * 100 + '%';
  dot.style.animationDelay = Math.random() * 5 + 's'; // ✅ delay rawak
  container.appendChild(dot);
}

	
  </script>

</body>
</html>
